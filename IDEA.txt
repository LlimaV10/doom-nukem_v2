Что если работать лишь с векторами!
То бишь в начале получать нормализированные вектора view(pv), left(pl), right(pr)
и только с их помощью проецировать изображение, просто работая с векторами!
Делаем так:
	из скалярного произведения векторов находим угол между вектором, который идет от игрока к стене и векторами left и right
	если и тот и другой мельше, допустим 40ка градусов то вектор находится между ними и можно найти его положение X на экране из
		этих углов!!!
	Таким образом я гарантировано уменьшаю количество ошибок при различном делении и работой с прямыми, а также повышаю
		производительность!

Получение вектора view:
	Получаю уравнение прямой как и раньше, а после
	Если A == 0 или B == 0 - то всё понятно.
	В инном случае
	pv.x = 1.0f;
	pv.y =  A * (iw->p.x + 1.0f) + B * iw->p.y + C
	norm = sqrtf(pv.x * pv.x + pv.y * pv.y)
	pv.x /= norm
	pv.y /= norm
	
Получение вектора left(pl), right(pr):
	Зададим что половина угла обзора == angle
	pv.x * nx + pv.y * ny == 1.0f * 1.0f * cos(angle)
							  |		 |
				Длина вектора view , left || right 
	
	nx == (cos(angle) - pv.y * ny) / pv.x , pv.x != 0
	ny == (cos(angle) - pv.x * nx) / pv.y , pv.y != 0
	
Пересчитывать угол между left vector и right vector